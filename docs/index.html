<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Ting Chang" />


<title>My Final Project Template</title>

<script src="site_libs/header-attrs-2.4.6/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 54px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h2 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h3 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h4 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h5 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h6 {
  padding-top: 59px;
  margin-top: -59px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Spatial Data Science Final Project</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">My Final Project Template</h1>
<h3 class="subtitle">Subtitle here if desired</h3>
<h4 class="author">Ting Chang</h4>

</div>


<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>[~ 200 words]</p>
<p>Clearly stated background and questions / hypotheses / problems being addressed. Sets up the analysis in an interesting and compelling way.</p>
</div>
<div id="materials-and-methods" class="section level1">
<h1>Materials and methods</h1>
<p>[~ 200 words]</p>
<p>Narrative: Clear narrative description of the data sources and methods. Includes data from at least two sources that were integrated / merged in R.</p>
<p>Code: The code associated with the project is well organized and easy to follow. Demonstrates mastery of R graphics and functions.</p>
<p>Data: The underlying data are publicly accessible via the web and downloaded/accessed within the Rmd script. If you want to use your own data, you must make it available on a website (e.g. Figshare) so that others are able to re-run your code.</p>
<p>You can do bullets like this:</p>
<ul>
<li>The first most important thing</li>
<li>The second most important thing</li>
<li>The third most important thing</li>
</ul>
<p>You can do numbers like this:</p>
<ol style="list-style-type: decimal">
<li>The first most important thing</li>
<li>The second most important thing</li>
<li>The third most important thing</li>
</ol>
<p>See <a href="http://rmarkdown.rstudio.com/">http://rmarkdown.rstudio.com/</a> for all the amazing things you can do.</p>
<p>Load required packages (you may need to install some packages).</p>
<pre class="r"><code>library(tidyverse)
library(tidycensus)
library(kableExtra)
library(ggplot2)
library(RColorBrewer)

knitr::opts_chunk$set(cache=TRUE)  # cache the results for quick compiling
Sys.setenv(&quot;LANGUAGE&quot;=&quot;En&quot;)
Sys.setlocale(&quot;LC_ALL&quot;, &quot;English&quot;)</code></pre>
<div id="download-and-clean-all-required-data" class="section level2">
<h2>Download and clean all required data</h2>
<p>Download census data from tidycensus.</p>
<pre class="r"><code># For searching variables from ACS-5yr 2018
v18 &lt;- load_variables(2018, &quot;acs5&quot;, cache = TRUE)

# Downloading median household income data
median_income_18 &lt;- get_acs(geography = &quot;block group&quot;,
                            variables = c(medincome = &quot;B19013_001&quot;),
                            state = &quot;IL&quot;,
                            county = c(&quot;Cook&quot;, &quot;DuPage&quot;),
                            year = 2018,
                            geometry = TRUE)

# Downloading employment data
employment_18 &lt;- get_acs(geography = &quot;block group&quot;,
                         variables = c(total_in_labor = &quot;B23025_002&quot;, unemployed = &quot;B23025_005&quot;),
                         state = &quot;IL&quot;,
                         county = c(&quot;Cook&quot;, &quot;DuPage&quot;),
                         year = 2018,
                         geometry = TRUE,
                         output = &quot;wide&quot;)</code></pre>
<p>Download crime report data from Chicago Data Portal (access via SODA API).</p>
<pre class="r"><code># Downloading crime report via SODA API
dataurl = &quot;https://data.cityofchicago.org/resource/ijzp-q8t2.csv?$order=Date DESC&amp;$limit=460000&amp;$offset=20000&quot;
tdir = tempdir()
download.file(dataurl, destfile = file.path(tdir, &quot;chicago_crime.csv&quot;))

chicago_crime &lt;- read_csv(paste(tdir,&quot;/chicago_crime.csv&quot;, sep = &quot;&quot;))

chicago_crime_clean &lt;- chicago_crime %&gt;%
  mutate(date = as.Date(date, &quot;%Y.%m.%d&quot;)) %&gt;%
  filter(as.Date(date) &gt;= &quot;2018-12-31&quot; &amp; as.Date(date) &lt;= &quot;2020-10-04&quot;) %&gt;%
  select(-block, -iucr, -beat, -district, -ward, -community_area, -year) %&gt;%
  drop_na(location)</code></pre>
<p>Process the domestic violence data</p>
<pre class="r"><code>list_location &lt;- c(&quot;APARTMENT&quot;,
                   &quot;CHA APARTMENT&quot;,
                   &quot;CHA HALLWAY / STAIRWELL / ELEVATOR&quot;,
                   &quot;CHA HALLWAY/STAIRWELL/ELEVATOR&quot;,
                   &quot;CHA PARKING LOT&quot;,
                   &quot;CHA PARKING LOT / GROUNDS&quot;,
                   &quot;CHA PARKING LOT/GROUNDS&quot;,
                   &quot;COACH HOUSE&quot;,
                   &quot;DRIVEWAY - RESIDENTIAL&quot;,
                   &quot;HOUSE&quot;,
                   &quot;NURSING / RETIREMENT HOME&quot;,
                   &quot;NURSING HOME/RETIREMENT HOME&quot;,
                   &quot;RESIDENCE&quot;,
                   &quot;RESIDENCE - GARAGE&quot;,
                   &quot;RESIDENCE - PORCH / HALLWAY&quot;,
                   &quot;RESIDENCE - YARD (FRONT / BACK)&quot;,
                   &quot;RESIDENCE PORCH/HALLWAY&quot;,
                   &quot;RESIDENCE-GARAGE&quot;,
                   &quot;RESIDENTIAL YARD (FRONT/BACK)&quot;)

chicago_dv &lt;- chicago_crime_clean %&gt;%
  filter(domestic == TRUE &amp; location_description %in% list_location)

dv_count_week &lt;- chicago_dv %&gt;%
  group_by(week = cut(date, &quot;week&quot;)) %&gt;%
  tally(name = &quot;dv_count&quot;) %&gt;%
  mutate(week = as.Date(week))</code></pre>
<p>Lineplot of domestic violence count</p>
<pre class="r"><code>dv_col &lt;- brewer.pal(8, &quot;Dark2&quot;)[2]

ggplot(data = dv_count_week, aes(x = week, y = dv_count, group = 1)) +
  geom_line(color = dv_col, lwd = 0.8, alpha=0.7) +
  geom_point(color = dv_col, alpha=0.7) +
  scale_x_date(date_labels = &quot;%b %Y&quot;, date_breaks = &quot;1 months&quot;) +
  labs(x = &quot;Month&quot;, y = &quot;Count of Domestic Violence&quot;) +
  theme_light() +
  theme(axis.text.x = element_text(angle=45, hjust = 1))</code></pre>
<p><img src="index_files/figure-html/lineplot-1.png" width="672" /></p>
<pre class="r"><code>library(sf)</code></pre>
<pre><code>## Linking to GEOS 3.8.0, GDAL 3.0.4, PROJ 6.3.1</code></pre>
<pre class="r"><code>chicago_cbg &lt;- st_read(&quot;data/chicago_cbg.shp&quot;)</code></pre>
<pre><code>## Reading layer `chicago_cbg&#39; from data source `D:\Users\Ting\Documents\R\geo511-2020-project-tingtchang\data\chicago_cbg.shp&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 2184 features and 8 fields
## geometry type:  POLYGON
## dimension:      XYZ
## bbox:           xmin: -87.95924 ymin: 41.64429 xmax: -87.52366 ymax: 42.02314
## z_range:        zmin: 0 zmax: 0
## geographic CRS: WGS 84</code></pre>
<p>Add any additional processing steps here.</p>
</div>
</div>
<div id="results" class="section level1">
<h1>Results</h1>
<p>[~200 words]</p>
<p>Tables and figures (maps and other graphics) are carefully planned to convey the results of your analysis. Intense exploration and evidence of many trials and failures. The author looked at the data in many different ways before coming to the final presentation of the data.</p>
<p>Show tables, plots, etc. and describe them.</p>
</div>
<div id="conclusions" class="section level1">
<h1>Conclusions</h1>
<p>[~200 words]</p>
<p>Clear summary adequately describing the results and putting them in context. Discussion of further questions and ways to continue investigation.</p>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<p>All sources are cited in a consistent manner</p>
</div>

<!-- give the footer some space -->
<br/>
<br/>

<footer id="site-footer">
  <div id="footer1">
  This website is a project for Adam Wilson's <a href="https://wilsonlab.io/GEO511"><i> Spatial Data Science (GEO511) </i></a>Course at the University at Buffalo
  </div>
  <div id="footer2">
  <a rel="license" property="http://creativecommons.org/ns#license"
  href="http://creativecommons.org/licenses/by/4.0/" ><img src="img/cc-by.svg" alt="cc-by"/></a> 
  </div>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>


</body>
</html>
